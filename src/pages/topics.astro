---
import { getCollection } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);

// Categories with articles (based on Trivago structure)
const categories = [
	{
		name: "Transport Innovation",
		slug: "transport-innovation",
		articles: [
			{ title: "IoT i Transport: Framtiden 2025", date: "3 Feb 2025", readTime: "12 min read" },
			{ title: "Smart Traffic Management Systems", date: "15 Jan 2025", readTime: "8 min read" },
			{ title: "Sustainable Transport Solutions", date: "22 Dec 2024", readTime: "10 min read" }
		]
	},
	{
		name: "Backend",
		slug: "backend",
		articles: [
			{ title: "Streamlining API Testing with Modern Tools", date: "8 Jul 2024", readTime: "13 min read" },
			{ title: "Building Scalable Microservices Architecture", date: "14 May 2024", readTime: "22 min read" },
			{ title: "Database Optimization Strategies", date: "20 Nov 2023", readTime: "8 min read" }
		]
	},
	{
		name: "Cloud",
		slug: "cloud",
		articles: [
			{ title: "How we scaled our Prometheus setup", date: "23 Aug 2022", readTime: "9 min read" },
			{ title: "Container Orchestration Best Practices", date: "7 Jul 2021", readTime: "16 min read" },
			{ title: "Cloud Migration Strategies", date: "9 Jun 2021", readTime: "8 min read" }
		]
	},
	{
		name: "Data Science",
		slug: "data-science",
		articles: [
			{ title: "Machine Learning in Transport Analytics", date: "13 Feb 2025", readTime: "11 min read" },
			{ title: "Real-time Data Processing at Scale", date: "13 Feb 2024", readTime: "8 min read" },
			{ title: "Predictive Analytics for Smart Cities", date: "20 Nov 2023", readTime: "8 min read" }
		]
	},
	{
		name: "DevOps",
		slug: "devops",
		articles: [
			{ title: "Implementing Data Validation with Great Expectations in Hybrid Environments", date: "25 Apr 2023", readTime: "6 min read" },
			{ title: "CI/CD Pipeline Optimization", date: "18 Jul 2022", readTime: "7 min read" },
			{ title: "Infrastructure as Code Best Practices", date: "12 Jan 2022", readTime: "8 min read" }
		]
	},
	{
		name: "Frontend",
		slug: "frontend",
		articles: [
			{ title: "Building Progressive Web Apps", date: "12 Oct 2018", readTime: "10 min read" },
			{ title: "Modern JavaScript Frameworks Comparison", date: "22 Dec 2017", readTime: "4 min read" },
			{ title: "Responsive Design Principles", date: "26 Sept 2017", readTime: "10 min read" }
		]
	}
];

// Featured articles and popular tags
const featuredArticles = [
	{ title: "Implementing Data Validation with Great Expectations in Hybrid Environments", date: "25 Apr 2023", readTime: "6 min read" },
	{ title: "How we scaled our Prometheus setup", date: "23 Aug 2022", readTime: "9 min read" },
	{ title: "Being on-call as a software engineer - a challenging and fast learning experience", date: "12 Jan 2022", readTime: "8 min read" },
	{ title: "Java Reactive Programming - Effective Usage in a Real World Application", date: "16 Mar 2021", readTime: "15 min read" },
	{ title: "Learn Redis the hard way (in production)", date: "25 Jan 2017", readTime: "18 min read" }
];

const popularTags = ['github', 'java', 'automation', 'monitoring', 'open source', 'data'];
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title="Topics · IET Connect tech blog" description="Browse articles by category - Transport Innovation, Backend, Cloud, Data Science, DevOps, and Frontend development." />
		<style>
			* {
				box-sizing: border-box;
			}
			body {
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
				margin: 0;
				padding: 0;
				background: #ffffff;
				color: #333;
				line-height: 1.5;
			}
			
			/* Header styles */
			.header {
				background: white;
				border-bottom: 1px solid #e5e5e5;
				padding: 0;
			}
			.header-content {
				max-width: 1200px;
				margin: 0 auto;
				display: flex;
				align-items: center;
				justify-content: space-between;
				padding: 12px 20px;
			}
			.logo {
				color: #ff6b35;
				font-size: 24px;
				font-weight: bold;
				text-decoration: none;
			}
			.nav {
				display: flex;
				align-items: center;
				gap: 32px;
			}
			.nav a {
				color: #666;
				text-decoration: none;
				font-size: 14px;
				font-weight: 500;
			}
			.nav a:hover, .nav a.active {
				color: #333;
			}
			.dropdown {
				position: relative;
				display: inline-block;
			}
			.dropdown-content {
				display: none;
				position: absolute;
				top: 100%;
				left: 0;
				background: white;
				min-width: 200px;
				box-shadow: 0 8px 16px rgba(0,0,0,0.1);
				border: 1px solid #e5e5e5;
				border-radius: 4px;
				z-index: 1000;
				padding: 8px 0;
				margin-top: 4px;
			}
			.dropdown:hover .dropdown-content {
				display: block;
			}
			.dropdown-content a {
				color: #666;
				padding: 8px 16px;
				text-decoration: none;
				display: block;
				font-size: 14px;
				transition: background-color 0.2s ease;
			}
			.dropdown-content a:hover {
				background-color: #f8f9fa;
				color: #333;
			}
			.social-icons {
				display: flex;
				align-items: center;
				gap: 12px;
			}
			.social-icons span {
				font-size: 12px;
				color: #666;
				margin-right: 8px;
			}
			.social-icon {
				width: 24px;
				height: 24px;
				background: #666;
				border-radius: 50%;
				display: inline-block;
			}
			
			/* Main content */
			.main-container {
				max-width: 1200px;
				margin: 0 auto;
				padding: 40px 20px;
				display: grid;
				grid-template-columns: 1fr 300px;
				gap: 60px;
			}
			
			/* Breadcrumb */
			.breadcrumb {
				margin-bottom: 40px;
				font-size: 14px;
				color: #666;
			}
			.breadcrumb a {
				color: #007bff;
				text-decoration: none;
			}
			.breadcrumb a:hover {
				text-decoration: underline;
			}
			
			/* Categories */
			.categories-content {
				max-width: 800px;
			}
			.page-title {
				font-size: 48px;
				font-weight: 900;
				margin: 0 0 40px 0;
				color: #333;
			}
			.category-section {
				margin-bottom: 60px;
			}
			.category-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 30px;
				border-bottom: 2px solid #e5e5e5;
				padding-bottom: 10px;
			}
			.category-title {
				font-size: 24px;
				font-weight: 600;
				color: #333;
				margin: 0;
			}
			.see-all {
				color: #007bff;
				text-decoration: none;
				font-size: 14px;
				font-weight: 500;
			}
			.see-all:hover {
				text-decoration: underline;
			}
			.articles-list {
				display: grid;
				gap: 30px;
			}
			.article-item {
				padding-bottom: 30px;
				border-bottom: 1px solid #f0f0f0;
			}
			.article-item:last-child {
				border-bottom: none;
			}
			.article-title {
				font-size: 18px;
				font-weight: 600;
				margin: 0 0 8px 0;
				line-height: 1.3;
				color: #333;
			}
			.article-title a {
				text-decoration: none;
				color: inherit;
				transition: color 0.2s ease;
			}
			.article-title a:hover {
				color: #007bff;
			}
			.article-meta {
				font-size: 13px;
				color: #999;
			}
			
			/* Sidebar */
			.sidebar {
				padding-top: 0;
			}
			.sidebar-section {
				margin-bottom: 50px;
			}
			.sidebar-section h3 {
				font-size: 18px;
				font-weight: 600;
				color: #666;
				margin: 0 0 20px 0;
				border-bottom: 1px solid #e5e5e5;
				padding-bottom: 8px;
			}
			.featured-article {
				margin-bottom: 20px;
				padding-bottom: 20px;
				border-bottom: 1px solid #f0f0f0;
			}
			.featured-article:last-child {
				border-bottom: none;
			}
			.featured-article h4 {
				font-size: 14px;
				font-weight: 600;
				margin: 0 0 8px 0;
				line-height: 1.3;
				color: #333;
			}
			.featured-article a {
				text-decoration: none;
				color: inherit;
			}
			.featured-article a:hover h4 {
				color: #007bff;
			}
			.featured-meta {
				font-size: 12px;
				color: #999;
			}
			.tags-grid {
				display: grid;
				grid-template-columns: repeat(3, 1fr);
				gap: 8px;
			}
			.tag-item {
				background: #f8f9fa;
				padding: 8px 12px;
				border-radius: 4px;
				text-align: center;
				font-size: 12px;
				color: #666;
				text-decoration: none;
				transition: all 0.2s ease;
			}
			.tag-item:hover {
				background: #007bff;
				color: white;
			}
			.see-all-tags {
				grid-column: span 3;
				text-align: right;
				margin-top: 8px;
			}
			.career-section {
				background: #f8f9fa;
				padding: 30px;
				border-radius: 8px;
				text-align: left;
			}
			.career-section h3 {
				font-size: 24px;
				font-weight: 700;
				color: #333;
				margin: 0 0 15px 0;
				border: none;
				padding: 0;
			}
			.career-section p {
				font-size: 14px;
				line-height: 1.6;
				color: #666;
				margin-bottom: 20px;
			}
			.career-cta {
				color: #007bff;
				text-decoration: none;
				font-weight: 600;
				font-size: 14px;
			}
			.career-cta:hover {
				text-decoration: underline;
			}
			@media (max-width: 768px) {
				.main-container {
					grid-template-columns: 1fr;
					gap: 40px;
					padding: 20px;
				}
				.page-title {
					font-size: 32px;
				}
			}
		</style>
	</head>

	<body>
		<Header />

		<!-- Main Content -->
		<div class="main-container">
			<main class="categories-content">
				<!-- Breadcrumb -->
				<nav class="breadcrumb">
					<a href="/">Homepage</a> › Categories
				</nav>

				<!-- Categories -->
				{categories.map((category) => (
					<section class="category-section">
						<div class="category-header">
							<h2 class="category-title">{category.name} Articles</h2>
							<a href={`/categories/${category.slug}`} class="see-all">See all ›</a>
						</div>
						<div class="articles-list">
							{category.articles.map((article) => (
								<article class="article-item">
									<h3 class="article-title">
										<a href="#">{article.title}</a>
									</h3>
									<div class="article-meta">{article.date} · {article.readTime}</div>
								</article>
							))}
						</div>
					</section>
				))}
			</main>

			<!-- Sidebar -->
			<aside class="sidebar">
				<!-- Featured Articles -->
				<section class="sidebar-section">
					<h3>Featured articles</h3>
					{featuredArticles.map((article) => (
						<div class="featured-article">
							<a href="#">
								<h4>{article.title}</h4>
								<div class="featured-meta">{article.date} • {article.readTime}</div>
							</a>
						</div>
					))}
				</section>

				<!-- Popular Tags -->
				<section class="sidebar-section">
					<h3>Popular tags</h3>
					<div class="tags-grid">
						{popularTags.map((tag) => (
							<a href={`/tags/${tag}`} class="tag-item">{tag}</a>
						))}
						<div class="see-all-tags">
							<a href="/tags" class="see-all">See all tags</a>
						</div>
					</div>
				</section>

				<!-- Career Section -->
				<section class="sidebar-section">
					<div class="career-section">
						<h3>Join our team</h3>
						<p>We're always looking for talented engineers to join our team and help us build the future of transport technology.</p>
						<a href="/careers" class="career-cta">View open positions →</a>
					</div>
				</section>
			</aside>
		</div>

		<Footer />
	</body>
</html>
